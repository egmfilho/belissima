<tela id="configuracoes" icon="glyphicon-cog" titulo="Configurações"
      subtitulo="Consulta, cadastro e edição de usuários e perfis." show-footer="true">

  <div class="conteudo-tela">
    <ul class="nav nav-tabs" ng-init="opcao = 'usuarios'">
      <li role="presentation" ng-class="opcao === 'usuarios' ? 'active' : ''"><a href="" ng-click="opcao = 'usuarios'">Usuários</a>
      </li>
      <li role="presentation" ng-class="opcao === 'perfis' ? 'active' : ''"><a href="" ng-click="opcao = 'perfis'">Perfis</a>
      </li>
    </ul>
    <div class="conteudo-nav condensar-rows">

      <!--USUARIOS-->
      <div class="col-md-12" ng-if="opcao === 'usuarios'">
        <div class="col-xs-6 col-sm-3 col-md-3">
          <button class="btn btn-default botao-esticado" ng-click="configuracoes.atualizarUsuarios()"><span
            class="glyphicon glyphicon-refresh"></span> Atualizar
          </button>
        </div>
        <div class="col-xs-6 col-sm-3 col-sm-push-6 col-md-3">
          <button class="btn btn-default botao-esticado" ng-click="configuracoes.adicionarUsuario()"><span
            class="glyphicon glyphicon-plus"></span> Novo Usuário
          </button>
        </div>
        <div class="col-md-12"><h1></h1></div>
        <div class="col-md-12">
          <table class="tabela tabela-bordered tabela-esticada">
            <thead>
            <tr>
              <th>Perfil</th>
              <th>Nome</th>
              <th>Usuário</th>
              <th>Email</th>
              <th>Último Acesso</th>
              <th>&nbsp;</th>
            </tr>
            </thead>
            <tbody>
            <tr ng-repeat="usuario in configuracoes.usuarios">
              <td data-label="Perfil">{{usuario.perfil.nome}}</td>
              <td data-label="Nome">{{usuario.nome}}</td>
              <td data-label="Usuário">{{usuario.usuario}}</td>
              <td data-label="Email">{{usuario.email}}</td>
              <td data-label="Último Acesso">{{usuario.ultimoAcesso ? (usuario.ultimoAcesso | date) : 'Não disponível'}}
              </td>
              <td class="hidden-xs"><a href="" ng-click="configuracoes.editarUsuario(usuario)"><span
                class="glyphicon glyphicon-pencil"></span></a></td>
              <td class="visible-xs-block">
                <button class="btn btn-default pull-right" ng-click="configuracoes.editarUsuario(usuario)"><span
                  class="glyphicon glyphicon-pencil"></span> Editar
                </button>
              </td>
            </tr>
            <tr class="hidden-xs" ng-if="configuracoes.usuarios.length < configuracoes.usuariosPagination.max"
                ng-repeat="n in getNumber(configuracoes.usuariosPagination.max - configuracoes.usuarios.length < 0 ? 0 : configuracoes.usuariosPagination.max - configuracoes.usuarios.length) track by $index">
              <td>&nbsp;</td>
              <td>&nbsp;</td>
              <td>&nbsp;</td>
              <td>&nbsp;</td>
              <td>&nbsp;</td>
              <td>&nbsp;</td>
            </tr>
            </tbody>
          </table>
        </div>
        <!--<br>-->
        <ul style="float: right" uib-pagination total-items="configuracoes.usuariosPagination.total"
            items-per-page="configuracoes.usuariosPagination.max" ng-model="configuracoes.usuariosPagination.current"
            ng-change="pageChanged()" next-text="próximo" previous-text="anterior"></ul>
      </div>
      <!--FIM USUARIOS-->

      <!--PERFIS-->
      <div class="col-md-12" ng-if="opcao === 'perfis'">
        <div class="col-xs-6 col-sm-3 col-md-3">
          <button class="btn btn-default botao-esticado" ng-click="configuracoes.atualizarPerfis()"><span
            class="glyphicon glyphicon-refresh"></span> Atualizar
          </button>
        </div>
        <div class="col-xs-6 col-sm-3 col-sm-push-6 col-md-3">
          <button class="btn btn-default botao-esticado" ng-click="configuracoes.adicionarPerfil()"><span
            class="glyphicon glyphicon-plus"></span> Novo Perfil
          </button>
        </div>
        <div class="col-md-12"><h1></h1></div>
        <div class="col-md-12">
          <table class="tabela tabela-bordered tabela-esticada" ng-init="len = 15">
            <thead>
            <tr>
              <th>Nome</th>
              <th>Data de Cadastro</th>
              <th>Última Atualização</th>
              <th>&nbsp;</th>
              <th>&nbsp;</th>
            </tr>
            </thead>
            <tbody>
            <tr ng-repeat="perfil in configuracoes.perfis">
              <td data-label="Nome">{{perfil.nome}}</td>
              <td data-label="Data de cadastro">{{perfil.dataCadastro | date}}</td>
              <td data-label="Última atualização">{{perfil.dataUpdate | date}}</td>
              <td class="hidden-xs">
                <a href="" ng-click="configuracoes.editarPerfil(perfil)"><span
                  class="glyphicon glyphicon-pencil"></span></a>
              </td>
              <td class="hidden-xs">
                <a href="" ng-click="configuracoes.excluirPerfil(perfil)"><span
                  class="glyphicon glyphicon-trash"></span></a>
              </td>
              <td class="visible-xs-block">
                <button class="btn btn-default pull-right" ng-click="configuracoes.editarPerfil(perfil)"><span
                  class="glyphicon glyphicon-pencil"></span> Editar
                </button>
                <button class="btn btn-default pull-right" ng-click="configuracoes.excluirPerfil(perfil)"><span
                  class="glyphicon glyphicon-trash"></span> Excluir
                </button>
              </td>

            </tr>
            <tr class="hidden-xs" ng-if="configuracoes.usuarios.length < configuracoes.perfisPagination.max"
                ng-repeat="n in getNumber(configuracoes.perfisPagination.max - configuracoes.perfis.length < 0 ? 0 : configuracoes.perfisPagination.max - configuracoes.perfis.length) track by $index">
              <td>&nbsp;</td>
              <td>&nbsp;</td>
              <td>&nbsp;</td>
              <td>&nbsp;</td>
              <td>&nbsp;</td>
            </tr>
            </tbody>
          </table>
        </div>
      </div>
      <!--FIM PERFIS-->

    </div>

</tela>


